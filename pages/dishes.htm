title = "Dishes"
url = "/dishes"
layout = "default"
==
<?php
function onStart()
{
    $this['currentPage'] = 'dish';
    $this['dishes'] = Plugins\Responsiv\DishSmith\Models\Dish::ofUser(Auth::getUser())->get();
}

function onSaveDish()
{

}

function onNewDish() {}

?>
==
<div class="dishes-page" id="dishesPage">

    <div class="dishes">

        <div
            class="col-xs-12 col-sm-12 col-md-6 col-lg-4">
            <a
                href="javascript:;" 
                class="new-dish" 
                data-request="onNewDish"
                data-request-success="$('#dishesPage').toggleClass('edit-mode')"
                data-request-update="'dishes/form': '#partialDishesForm'">
                <i class="icon-plus"></i>
                <p>New dish</p>
            </a>
        </div>

        {% for dish in dishes %}
            {% partial 'dishes/dish' dish=dish %}
        {% endfor %}

    </div>

    <!-- Form -->
    <div class="row dish-form" id="partialDishesForm">
        {% partial 'dishes/form' %}
    </div>

</div>
